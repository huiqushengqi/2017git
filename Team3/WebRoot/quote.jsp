<%@ page language="java" import="java.util.*" pageEncoding="UTF-8"%>
<%
String path = request.getContextPath();
String basePath = request.getScheme()+"://"+request.getServerName()+":"+request.getServerPort()+path+"/";
%>
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--[if IE 6]><html lang="en" class="ielt7  ielt8  ielt9 ielt10 en"><![endif]-->
<!--[if IE 7]><html lang="en" class="ie7  ielt8  ielt9 ielt10 en"><![endif]-->
<!--[if IE 8 ]><html lang="en" class="ie8 ielt9 ielt10 en"><![endif]-->
<!--[if IE 9 ]><html lang="en" class="ie9 ielt10 en"><![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--><html lang="en" class=" en"><!--<![endif]-->
<head>

<meta charset="utf-8">
<meta name="renderer" content="webkit">
<title>三个粉刷匠装饰-装修总预算计算器</title>
<meta name="keywords" content="" />
<meta name="description" content="" />

<link href="css/tools.css" rel="stylesheet" type="text/css" />
<link href="css/tools_style.css" rel="stylesheet" type="text/css" />
<link href="css/tools_face.css" rel="stylesheet" media="print" type="text/css" />
<link href="css/style2.css" rel="stylesheet" type="text/css" />
<link type="text/css" href="style.css" rel="stylesheet" />
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script>
       var jq = jQuery.noConflict();
</script>
<script type="text/javascript">
   function checkSerachForm(){
     if(jq('.header_search_input').val()==""){
       jq('.header_search_input').focus()
       return false
     }else{
       try{clickStream.getCvParams(searchclicktage);}catch(e){}
       return true;
     }
   }
</script>
</head>
<body class="narrow_980">
<jsp:include page="MyJsp.jsp"></jsp:include>
<script src="js/jsq_js.js" type="text/javascript"></script>
<div class="box">
<div id="content" style="height:500px;margin-top:20px;padding-top:20px;">
<div class="tools_all"><div class="tools_menu" id="tools_menu_list">
<div class="tools_menu_title"><img src="img/tools_tubiao.gif" />&nbsp;家装计算器</div>
<div class="tools_title_list">
<ul class="menu_list">
		<li class="menu_first_temp">装修总预算器</li>

		<li class="menu_other"><a href="myquote.action?name=qiangzhuan&typename=墙砖&page=1">墙砖</a></li>
		
		<li class="menu_other"><a href="myquote.action?name=dizhuan&typename=地砖&page=1">地砖</a></li>
		
		<li class="menu_other"><a href="myquote.action?name=bizhi&typename=壁纸&page=1">壁纸</a></li>
		
		<li class="menu_other"><a href="myquote.action?name=tuliao&typename=涂料&page=1">涂料</a></li>
		
		<li class="menu_other"><a href="myquote.action?name=chuanglian&typename=窗帘&page=1">窗帘</a></li>
	
</ul>
</div>
</div>
<DIV class="area areabg areabor clearfix">
<div id="tools_title"></div>
<div id="tools_title_bg">装修总预算计算器</div>

<DIV class=content>
<TABLE id=dataListInp class=dataList border=0 cellSpacing=1 cellPadding=0
width="100%" >
  <THEAD>
  <TR class=til>
    <TH class=no width=30 scope=col>No.</TH>
    <TH class=xm scope=col>项目</TH>
    <TH class=dw width=30 scope=col>单位</TH>
    <TH class=sl width=30 scope=col>数量</TH>
    <TH class=dj width=55 scope=col>单价(元)</TH>
    <TH class=hj width=55 scope=col>合计(元)</TH>
    <TH class=clsm width=190 scope=col>主要材料/说明</TH>
    <TH class=xs width=55 scope=col>显示</TH>
 </TR>
 </THEAD>
 <TBODY>
  <TR>
    <TD class=no>1</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title="增行" href="#">增行</A></SPAN>/<SPAN class=cDRed><A title="减行" href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>2</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>3</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>4</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>5</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>6</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>7</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>8</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>9</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  <TR>
    <TD class=no>10</TD>
    <TD class=xm>&nbsp;</TD>
    <TD class=dw>&nbsp;</TD>
    <TD class=sl>&nbsp;</TD>
    <TD class=dj>0</TD>
    <TD class=hj>0</TD>
    <TD class=clsm>&nbsp;</TD>
    <TD class=xs><SPAN class=cGreen><A title=增行 
      href="#">增行</A></SPAN>/<SPAN class=cDRed><A 
      title=减行 href="#">减行</A></SPAN></TD></TR>
  </TBODY>
  <TFOOT>
  <TR class=til>
    <TH class=no scope=col>No.</TH>
    <TH class=xm scope=col>项目</TH>
    <TH class=dw scope=col>单位</TH>
    <TH class=sl scope=col>数量</TH>
    <TH class=dj scope=col>单价(元)</TH>
    <TH class=hj scope=col>合计(元)</TH>
    <TH class=clsm scope=col>主要材料/说明</TH>
    <TH class=xs scope=col>显示</TH></TR></TFOOT></TABLE>
<DIV class=dataListbot>
<DIV class=total>总价(元)：<STRONG id=totalNum><FONT COLOR=red>0</FONT></STRONG></DIV>
<DIV class=bts><!-- <input type="submit" value="提交保存" /> --><INPUT onclick=window.print(); value=打印 type=button> 
<INPUT onclick=window.location.href=window.location.href value=填写新预算单 type=button> 
<INPUT id=addLine value=新增一行 type=button></DIV></DIV><SPAN 
class=blank12></SPAN></DIV>
</DIV>
</div>
</div>

<SCRIPT type=text/javascript>
//<![CDATA[
function checkEdited(obj){// 检查行内表格是否已经被修改
	var tdobj=obj.parentNode;
	var trobj=tdobj.parentNode;
	var val=obj.value;
	if(val=='') val='&nbsp;';
	if (obj.className=='w100 num') {
		var val=parseInt(val);
		obj.parentNode.innerHTML=val?val:obj.parentNode.defaultval;
	}else{
	
			obj.parentNode.innerHTML=val;
		
	}
	
	if( tdobj.innerHTML != tdobj.defaultval ){
		trobj.edit=trobj.edit+tdobj.className+'|';
	}else{
		trobj.edit=trobj.edit.replace(tdobj.className+'|','');
	}
	if(trobj.edit!='|'){
		trobj.className='inp';
		var hjval = parseInt($('td.sl',$(trobj))[0].innerHTML) * parseInt($('td.dj',$(trobj))[0].innerHTML);
		(hjval)?hjval=hjval:hjval=0;
		$('td.hj',$(trobj))[0].innerHTML=hjval;
		getTotal();
	}else{
		trobj.className='';
	}
}
function inpCl(obj){// 点击变换输入框
	if (/^(?:xm|dw|sl|dj|clsm)$/.test(obj.className)) {
		if (!$("input", obj).length){
			var newInput=document.createElement("input");//创建input
			if (/^(?:sl|dj|hj)$/.test(obj.className)) {
				newInput.className='w100 num';
			}else{
				newInput.className='w100';
			}
			(obj.innerHTML=='&nbsp;')?newInput.value='':newInput.value=obj.innerHTML;
			newInput.onblur=function(){	checkEdited(this);	}
			obj.innerHTML='';
			obj.appendChild(newInput);
			newInput.select();
		}
	}
}
function linkCl(obj,type){// 增加删除行
	var trobj=obj.parentNode.parentNode.parentNode;
	var tbobj=trobj.parentNode;
	if(type=='add'){
		var nowRow=trobj.rowIndex;
		var x=tbobj.insertRow(nowRow);
		x.edit='|';
		var td=$(trobj).$('td');
		var tdL=td.length;
		for(var i=0;i<tdL;i++){
			var tdcell=x.insertCell(i);
			if( i == 5 || i == 7 ){
				tdcell.defaultval=td[i].defaultval;
			}else{
				tdcell.defaultval='&nbsp;';
			}
			tdcell.innerHTML=tdcell.defaultval;
			tdcell.className=td[i].className;
			$(tdcell).addEvent("click",function() {	inpCl(this);  });
			
		}
		$('td.xs .cGreen a',x).addEvent("click",function() {linkCl(this,'add');return false;  });
		$('td.xs .cDRed a',x).addEvent("click",function() {	linkCl(this,'red');return false;  });
	}else{
		tbobj.deleteRow(trobj.rowIndex-1);
		getTotal();
	}
	resetNo();
}
function resetNo(){ // 重建排序
	var tdnolist=$('#dataListInp tbody td.no');
	var tdnolistL=tdnolist.length;
	for(var i=0;i<tdnolistL;i++){
		tdnolist[i].innerHTML=i+1;
	}
}
function getTotal(){
	var tdhjlist=$('#dataListInp tbody td.hj');
	var tdhjlistL=tdhjlist.length;
	var num=0;
	for(var i=0;i<tdhjlistL;i++){
		num+=parseInt(tdhjlist[i].innerHTML);
	}
	$('#totalNum').innerHTML=num;
}

var tdlist=$('#dataListInp tbody td');
var tdlistL=tdlist.length;
for(var i=0;i<tdlistL;i++){
	tdlist[i].defaultval=tdlist[i].innerHTML;
	tdlist[i].parentNode.edit='|';
}

$('#dataListInp tbody td').addEvent("click",function() {	inpCl(this);  });

var addLink = $('#dataListInp tbody td.xs .cGreen a');
addLink.addEvent("click",function() {	linkCl(this,'add');return false;  });
var redLink = $('#dataListInp tbody td.xs .cDRed a');
redLink.addEvent("click",function() {	linkCl(this,'red');return false;  });

$('#addLine').addEvent(
	"click",
	function() {	
		var tr=$('#dataListInp tbody tr td.xs .cGreen a');
		var trL=tr.length;
		var addlink=$($(tr[trL-1]));// 获取最后一行的的增删按钮对象。
		linkCl(addlink,'add');
	}
);





 
//]]>
</SCRIPT>
</div>

</div>
</div>
</body>
</html>

